<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Lion or Peacock</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
    <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
    <link rel="stylesheet" href="/static/site.css">
</head>

<body>

  <section id="portfolio" class="no-padding">
    <div class="container-fluid">
      <div class="row no-gutter">
	<div class="col-lg-6 col-sm-6">
	  <a class="portfolio-box " href="#"  onclick="proceed('NLD')">
	    <img alt="" class="img-flag img-responsive" src="static/flags/NLD.png" />
	    <div class="portfolio-box-title">
		  NLDP
	    </div>
	    <div class="portfolio-box-caption">
	      <div class="portfolio-box-caption-content">
		<div class="project-name">
		  National League for Democracy
		</div>
	      </div>
	    </div>
	  </a>
	</div>

	<div class="col-lg-6 col-sm-6">
	  <a class="portfolio-box" href="#" onclick="proceed('USDP')">
	    <img alt="" class="img-flag img-responsive" src="static/flags/USDP.png">
	    <div class="portfolio-box-title">
	      USDP
	    </div>
	    <div class="portfolio-box-caption">
	      <div class="portfolio-box-caption-content">
		<div class="project-name">
		  Union Solidarity and Development Party
		</div>
	      </div>
	    </div>
	  </a>
	</div>

	<div class="col-md-4 col-sm-6">
	  <a class="portfolio-box" href="#" onclick="proceed('NUP')">
	    <img alt="" class="img-responsive" src="static/flags/NUP.png">
	    <div class="portfolio-box-title">
	      NUP
	    </div>
	    <div class="portfolio-box-caption">
	      <div class="portfolio-box-caption-content">
		<div class="project-name">
		  National Unity Party
		</div>
	      </div>
	    </div>
	  </a>
	</div>

	<div class="col-md-4 col-sm-6">
	  <a class="portfolio-box" href="#" onclick="proceed('DP')">
	    <img alt="" class="img-responsive" src="static/flags/DP.jpg">
	    <div class="portfolio-box-title">
	      DP
	    </div>
	    <div class="portfolio-box-caption">
	      <div class="portfolio-box-caption-content">
		<div class="project-name">
		  Democratic Party (Myanmar)
		</div>
	      </div>
	    </div>
	  </a>
	</div>

	<div class="col-md-4 col-sm-6">
	  <a class="portfolio-box" href="#" onclick="proceed('NDF')">
	    <img alt="" class="img-responsive" src="static/flags/NDF.png">
	    <div class="portfolio-box-title">
	      NDF
	    </div>
	    <div class="portfolio-box-caption">
	      <div class="portfolio-box-caption-content">
		<div class="project-name">
		  National Democratic Force
		</div>
	      </div>
	    </div>
	  </a>
	</div>

	<div class="col-md-4 col-sm-6">
	  <a class="portfolio-box" href="#" onclick="proceed('SNLD')">
	    <img alt="" class="img-responsive" src="static/flags/SNLD.png">
	    <div class="portfolio-box-title">
	      SNLD
	    </div>
	    <div class="portfolio-box-caption">
	      <div class="portfolio-box-caption-content">
		<div class="project-name">
		  Shan Nationalities League for Democracy
		</div>
	      </div>
	    </div>
	  </a>
	</div>

	<div class="col-md-4 col-sm-6">
	  <a class="portfolio-box" href="#" onclick="proceed('SNDP')">
	    <img alt="" class="img-responsive" src="static/flags/SNDP.png">
	    <div class="portfolio-box-title">
	      SNDP
	    </div>
	    <div class="portfolio-box-caption">
	      <div class="portfolio-box-caption-content">

		<div class="project-name">
		  Shan Nationalities Democratic Party
		</div>
	      </div>
	    </div>
	  </a>
	</div>

	<div class="col-md-4 col-sm-6">
	  <a class="portfolio-box" href="#" onclick="proceed('ANP')">
	    <img alt="" class="img-responsive" src="static/flags/ANP.png">
	    <div class="portfolio-box-title">
	      ANP
	    </div>
	    <div class="portfolio-box-caption">
	      <div class="portfolio-box-caption-content">
		<div class="project-name">
		  Arakan National Party
		</div>
	      </div>
	    </div>
	  </a>
	</div>

      </div>
    </div>
  </section>
<!-- end pricing-tables -->


<script type="text/javascript">
window.fbAsyncInit = function() {
    FB.init({
	appId      : '526791527487217',
	//appSecret  : 'e314e5fc761425d59ea9e2666c63e108'
	xfbml      : true,
	version    : 'v2.4'
    });
};

function proceed (party) {
    FB.login(function(){
	var name, email, gender, link, birthday, hometown = null;
	var url, width, height = null;
	var params = {};

	var handleResponse = function (response) {
	    if (!response || response.error) {
		console.error (response);
	    }

	    params.name = params.name || response.name;
	    params.email = params.email | response.email;
	    params.gender = params.gender || response.gender;
	    params.link = params.link || response.link;
	    params.birthday = params.birthday || response.birthday;
	    params.hometown = params.hometown || response.hometown;
	    params.party = party

	    if (response.data) {
		params.url = params.url || response.data.url;
		params.width = params.width || response.data.width;
		params.height = params.height || response.data.height;
	    }

	    if (params.name && params.url) {
		console.log ("Both API calls finished.");

		//$.post( "/", params , function( data ) {
		    //console.log(data);
		//}, "json");

		//console.log (params.name);

		var form = document.createElement('form');
		form.method = 'post';
		form.action = '/';

		for (var name in params) {
		    if (params.hasOwnProperty(name)) {
		    input = document.createElement("INPUT");
		    input.type = "hidden";
		    input.name = name;
		    input.value = params[name];
		    console.log(input.name + '=' + input.value);
		    form.appendChild(input);
		    }
		}

		console.log(form);
		document.body.appendChild(form);
		form.submit();
	    }
	}

	FB.api("/me?fields=name,gender,link,birthday,email,hometown",
	       handleResponse);

	FB.api("/me/picture?width=320&height=320",
	       handleResponse);

    }, {scope: 'email'});
}

(function(d, s, id){
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/sdk.js";
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));

</script>

</body>
</html>
